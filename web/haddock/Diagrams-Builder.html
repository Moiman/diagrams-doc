<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Diagrams.Builder</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Diagrams-Builder.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Diagrams-Builder.html">Source</a></li><li><a href="http://www.haskell.org/haskellwiki/Diagrams/Comments/Diagrams.Builder">User Comments</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">diagrams-builder-0.5.0.3: hint-based build service for the diagrams graphics EDSL.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Maintainer</th><td>diagrams-discuss@googlegroups.com</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Diagrams.Builder</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Building diagrams
</a><ul><li><a href="#g:2">Options
</a></li><li><a href="#g:3">Regeneration decision functions and hashing
</a></li><li><a href="#g:4">Building
</a></li></ul></li><li><a href="#g:5">Interpreting diagrams
</a></li><li><a href="#g:6">Tools for creating standalone builder executables
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Tools for dynamically building diagrams, for <em>e.g.</em> creating
 preprocessors to interpret diagrams code embedded in documents.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:BuildOpts">BuildOpts</a> b v = <a href="#v:BuildOpts">BuildOpts</a> {<ul class="subs"><li><a href="#v:backendToken">backendToken</a> :: b</li><li><a href="#v:vectorToken">vectorToken</a> :: v</li><li><a href="#v:_backendOpts">_backendOpts</a> :: <a href="Diagrams-Core-Types.html#t:Options">Options</a> b v</li><li><a href="#v:_snippets">_snippets</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</li><li><a href="#v:_pragmas">_pragmas</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</li><li><a href="#v:_imports">_imports</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</li><li><a href="#v:_decideRegen">_decideRegen</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Diagrams-Core-Types.html#t:Options">Options</a> b v -&gt; <a href="Diagrams-Core-Types.html#t:Options">Options</a> b v))</li><li><a href="#v:_diaExpr">_diaExpr</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:_postProcess">_postProcess</a> :: <a href="Diagrams-Core-Types.html#t:Diagram">Diagram</a> b v -&gt; <a href="Diagrams-Core-Types.html#t:Diagram">Diagram</a> b v</li></ul>}</li><li class="src short"><a href="#v:mkBuildOpts">mkBuildOpts</a> ::  b -&gt; v -&gt; <a href="Diagrams-Core-Types.html#t:Options">Options</a> b v -&gt; <a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v</li><li class="src short"><a href="#v:backendOpts">backendOpts</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) (<a href="Diagrams-Core-Types.html#t:Options">Options</a> b v)</li><li class="src short"><a href="#v:snippets">snippets</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:pragmas">pragmas</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:imports">imports</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:decideRegen">decideRegen</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) (<a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Diagrams-Core-Types.html#t:Options">Options</a> b v -&gt; <a href="Diagrams-Core-Types.html#t:Options">Options</a> b v)))</li><li class="src short"><a href="#v:diaExpr">diaExpr</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:postProcess">postProcess</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) (<a href="Diagrams-Core-Types.html#t:Diagram">Diagram</a> b v -&gt; <a href="Diagrams-Core-Types.html#t:Diagram">Diagram</a> b v)</li><li class="src short"><a href="#v:alwaysRegenerate">alwaysRegenerate</a> ::  <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (a -&gt; a))</li><li class="src short"><a href="#v:hashedRegenerate">hashedRegenerate</a> ::  (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a> -&gt; a -&gt; a) -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (a -&gt; a))</li><li class="src short"><a href="#v:hashToHexStr">hashToHexStr</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:buildDiagram">buildDiagram</a> :: (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> b, <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> v, <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/vector-space-0.8.6/html/Data-VectorSpace.html#t:InnerSpace">InnerSpace</a> v, <a href="Diagrams-Core-Envelope.html#t:OrderedField">OrderedField</a> (<a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/vector-space-0.8.6/html/Data-VectorSpace.html#t:Scalar">Scalar</a> v), <a href="Diagrams-Core-Types.html#t:Backend">Backend</a> b v, <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hashable-1.2.1.0/html/Data-Hashable.html#t:Hashable">Hashable</a> (<a href="Diagrams-Core-Types.html#t:Options">Options</a> b v)) =&gt; <a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="Diagrams-Builder.html#t:BuildResult">BuildResult</a> b v)</li><li class="src short"><span class="keyword">data</span>  <a href="#t:BuildResult">BuildResult</a> b v<ul class="subs"><li>= <a href="#v:ParseErr">ParseErr</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>  </li><li>| <a href="#v:InterpErr">InterpErr</a> <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hint-0.3.3.7/html/Language-Haskell-Interpreter.html#t:InterpreterError">InterpreterError</a>  </li><li>| <a href="#v:Skipped">Skipped</a> <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a>  </li><li>| <a href="#v:OK">OK</a> <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> (<a href="Diagrams-Core-Types.html#t:Result">Result</a> b v)  </li></ul></li><li class="src short"><a href="#v:ppInterpError">ppInterpError</a> :: <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hint-0.3.3.7/html/Language-Haskell-Interpreter.html#t:InterpreterError">InterpreterError</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:setDiagramImports">setDiagramImports</a> :: <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hint-0.3.3.7/html/Language-Haskell-Interpreter.html#t:MonadInterpreter">MonadInterpreter</a> m =&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a> -&gt; [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>] -&gt; m ()</li><li class="src short"><a href="#v:interpretDiagram">interpretDiagram</a> :: <span class="keyword">forall</span> b v. (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> b, <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> v, <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/vector-space-0.8.6/html/Data-VectorSpace.html#t:InnerSpace">InnerSpace</a> v, <a href="Diagrams-Core-Envelope.html#t:OrderedField">OrderedField</a> (<a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/vector-space-0.8.6/html/Data-VectorSpace.html#t:Scalar">Scalar</a> v), <a href="Diagrams-Core-Types.html#t:Backend">Backend</a> b v) =&gt; <a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Either.html#t:Either">Either</a> <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hint-0.3.3.7/html/Language-Haskell-Interpreter.html#t:InterpreterError">InterpreterError</a> (<a href="Diagrams-Core-Types.html#t:Result">Result</a> b v))</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Build">Build</a>  = <a href="#v:Build">Build</a> {<ul class="subs"><li><a href="#v:width">width</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Prelude.html#t:Double">Double</a></li><li><a href="#v:height">height</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Prelude.html#t:Double">Double</a></li><li><a href="#v:srcFile">srcFile</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:expr">expr</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:outFile">outFile</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:dir">dir</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li></ul>}</li><li class="src short"><a href="#v:defaultBuildOpts">defaultBuildOpts</a> :: <a href="Diagrams-Builder.html#t:Build">Build</a></li></ul></div><div id="interface"><h1 id="g:1">Building diagrams
</h1><h2 id="g:2">Options
</h2><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:BuildOpts" class="def">BuildOpts</a> b v <a href="src/Diagrams-Builder-Opts.html#BuildOpts" class="link">Source</a></p><div class="doc"><p>Options to control the behavior of <code>buildDiagram</code>.  Create one
   with <code><a href="Diagrams-Builder.html#v:mkBuildOpts">mkBuildOpts</a></code> followed by using the provided lenses to
   override more fields; for example,
</p><pre>
   mkBuildOpts SVG zeroV (Options ...)
     &amp; imports .~ [&quot;Foo.Bar&quot;, &quot;Baz.Quux&quot;]
     &amp; diaExpr .~ &quot;square 6 # fc green&quot;
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:BuildOpts" class="def">BuildOpts</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:backendToken" class="def">backendToken</a> :: b</dt><dd class="doc"><p>Backend token
</p></dd><dt class="src"><a name="v:vectorToken" class="def">vectorToken</a> :: v</dt><dd class="doc"><p>Dummy vector argument to fix the vector space type
</p></dd><dt class="src"><a name="v:_backendOpts" class="def">_backendOpts</a> :: <a href="Diagrams-Core-Types.html#t:Options">Options</a> b v</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:_snippets" class="def">_snippets</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:_pragmas" class="def">_pragmas</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:_imports" class="def">_imports</a> :: [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:_decideRegen" class="def">_decideRegen</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Diagrams-Core-Types.html#t:Options">Options</a> b v -&gt; <a href="Diagrams-Core-Types.html#t:Options">Options</a> b v))</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:_diaExpr" class="def">_diaExpr</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:_postProcess" class="def">_postProcess</a> :: <a href="Diagrams-Core-Types.html#t:Diagram">Diagram</a> b v -&gt; <a href="Diagrams-Core-Types.html#t:Diagram">Diagram</a> b v</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:mkBuildOpts" class="def">mkBuildOpts</a> ::  b -&gt; v -&gt; <a href="Diagrams-Core-Types.html#t:Options">Options</a> b v -&gt; <a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v<a href="src/Diagrams-Builder-Opts.html#mkBuildOpts" class="link">Source</a></p><div class="doc"><p>Create a <code>BuildOpts</code> record with default options:
</p><ul><li> no snippets
</li><li> no pragmas
</li><li> no imports
</li><li> always regenerate
</li><li> the diagram expression <code>circle 1</code>
</li><li> no postprocessing
</li></ul></div></div><div class="top"><p class="src"><a name="v:backendOpts" class="def">backendOpts</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) (<a href="Diagrams-Core-Types.html#t:Options">Options</a> b v)<a href="src/Diagrams-Builder-Opts.html#backendOpts" class="link">Source</a></p><div class="doc"><p>Backend-specific options to use.
</p></div></div><div class="top"><p class="src"><a name="v:snippets" class="def">snippets</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]<a href="src/Diagrams-Builder-Opts.html#snippets" class="link">Source</a></p><div class="doc"><p>Source code snippets.  Each should be a syntactically valid
   Haskell module.  They will be combined intelligently, <em>i.e.</em>
   not just pasted together textually but combining pragmas,
   imports, <em>etc.</em> separately.
</p></div></div><div class="top"><p class="src"><a name="v:pragmas" class="def">pragmas</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]<a href="src/Diagrams-Builder-Opts.html#pragmas" class="link">Source</a></p><div class="doc"><p>Extra <code>LANGUAGE</code> pragmas to use (<code>NoMonomorphismRestriction</code>
   is automatically enabled.)
</p></div></div><div class="top"><p class="src"><a name="v:imports" class="def">imports</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]<a href="src/Diagrams-Builder-Opts.html#imports" class="link">Source</a></p><div class="doc"><p>Additional module imports (note that <a href="Diagrams-Prelude.html">Diagrams.Prelude</a> is
   automatically imported).
</p></div></div><div class="top"><p class="src"><a name="v:decideRegen" class="def">decideRegen</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) (<a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Diagrams-Core-Types.html#t:Options">Options</a> b v -&gt; <a href="Diagrams-Core-Types.html#t:Options">Options</a> b v)))<a href="src/Diagrams-Builder-Opts.html#decideRegen" class="link">Source</a></p><div class="doc"><p>A function to decide whether a particular diagram needs to be
   regenerated.  It will be passed a hash of the final assembled
   source for the diagram (but with the module name set to <code>Main</code>
   instead of something auto-generated, so that hashing the source
   will produce consistent results across runs), plus any options,
   local imports, and other things which could affect the result of
   rendering. It can return some information (such as a hash of the
   source) via the <code>x</code> result, which will be passed through to the
   result of <code>buildDiagram</code>.  More importantly, it decides whether
   the diagram should be built: a result of <code><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#v:Just">Just</a></code> means the diagram
   <em>should</em> be built; <code><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#v:Nothing">Nothing</a></code> means it should not. In the case
   that it should be built, it returns a function for updating the
   rendering options.  This could be used, <em>e.g.</em>, to request a
   filename based on a hash of the source.
</p><p>Two standard decision functions are provided for
   convenience: <code><a href="Diagrams-Builder.html#v:alwaysRegenerate">alwaysRegenerate</a></code> returns no extra information
   and always decides to regenerate the diagram;
   <code><a href="Diagrams-Builder.html#v:hashedRegenerate">hashedRegenerate</a></code> creates a hash of the diagram source and
   looks for a file with that name in a given directory.
</p></div></div><div class="top"><p class="src"><a name="v:diaExpr" class="def">diaExpr</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a><a href="src/Diagrams-Builder-Opts.html#diaExpr" class="link">Source</a></p><div class="doc"><p>The diagram expression to interpret.  All the given import sand
   snippets will be in scope, with the given LANGUAGE pragmas
   enabled.  The expression may have either of the types <code>Diagram b
   v</code> or <code>IO (Diagram b v)</code>.
</p></div></div><div class="top"><p class="src"><a name="v:postProcess" class="def">postProcess</a> ::  <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/lens-4.0.5/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v) (<a href="Diagrams-Core-Types.html#t:Diagram">Diagram</a> b v -&gt; <a href="Diagrams-Core-Types.html#t:Diagram">Diagram</a> b v)<a href="src/Diagrams-Builder-Opts.html#postProcess" class="link">Source</a></p><div class="doc"><p>A function to apply to the interpreted diagram prior to
   rendering.  For example, you might wish to apply <code>pad 1.1
   . centerXY</code>.  This is preferred over directly modifying the
   string expression to be interpreted, since it gives better
   typechecking, and works no matter whether the expression
   represents a diagram or an IO action.
</p></div></div><h2 id="g:3">Regeneration decision functions and hashing
</h2><div class="top"><p class="src"><a name="v:alwaysRegenerate" class="def">alwaysRegenerate</a> ::  <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (a -&gt; a))<a href="src/Diagrams-Builder-Opts.html#alwaysRegenerate" class="link">Source</a></p><div class="doc"><p>Convenience function suitable to be given as the final argument
   to <code>buildDiagram</code>.  It implements the simple policy of always
   rebuilding every diagram.
</p></div></div><div class="top"><p class="src"><a name="v:hashedRegenerate" class="def">hashedRegenerate</a><a href="src/Diagrams-Builder-Opts.html#hashedRegenerate" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a> -&gt; a -&gt; a)</td><td class="doc"><p>A function for computing an update to rendering options,
   given a new base filename computed from a hash of the
   diagram source.
</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>The directory in which to look for generated files
</p></td></tr><tr><td class="src">-&gt; <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a></td><td class="doc"><p>The hash
</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (a -&gt; a))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Convenience function suitable to be given as the final argument
   to <code>buildDiagram</code>.  It works by converting the hash value to a
   zero-padded hexadecimal string and looking in the specified
   directory for any file whose base name is equal to the hash.  If
   there is such a file, it specifies that the diagram should not be
   rebuilt.  Otherwise, it specifies that the diagram should be
   rebuilt, and uses the provided function to update the rendering
   options based on the generated hash string.  (Most likely, one
   would want to set the requested output file to the hash followed
   by some extension.)
</p></div></div><div class="top"><p class="src"><a name="v:hashToHexStr" class="def">hashToHexStr</a> :: <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a><a href="src/Diagrams-Builder-Opts.html#hashToHexStr" class="link">Source</a></p></div><h2 id="g:4">Building
</h2><div class="top"><p class="src"><a name="v:buildDiagram" class="def">buildDiagram</a> :: (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> b, <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> v, <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/vector-space-0.8.6/html/Data-VectorSpace.html#t:InnerSpace">InnerSpace</a> v, <a href="Diagrams-Core-Envelope.html#t:OrderedField">OrderedField</a> (<a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/vector-space-0.8.6/html/Data-VectorSpace.html#t:Scalar">Scalar</a> v), <a href="Diagrams-Core-Types.html#t:Backend">Backend</a> b v, <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hashable-1.2.1.0/html/Data-Hashable.html#t:Hashable">Hashable</a> (<a href="Diagrams-Core-Types.html#t:Options">Options</a> b v)) =&gt; <a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="Diagrams-Builder.html#t:BuildResult">BuildResult</a> b v)<a href="src/Diagrams-Builder.html#buildDiagram" class="link">Source</a></p><div class="doc"><p>Build a diagram by writing the given source code to a temporary
   module and interpreting the given expression, which can be of
   type <code>Diagram b v</code> or <code>IO (Diagram b v)</code>.  Can return either a
   parse error if the source does not parse, an interpreter error,
   or the final result.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:BuildResult" class="def">BuildResult</a> b v <a href="src/Diagrams-Builder.html#BuildResult" class="link">Source</a></p><div class="doc"><p>Potential results of a dynamic diagram building operation.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ParseErr" class="def">ParseErr</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></td><td class="doc"><p>Parsing of the code failed.
</p></td></tr><tr><td class="src"><a name="v:InterpErr" class="def">InterpErr</a> <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hint-0.3.3.7/html/Language-Haskell-Interpreter.html#t:InterpreterError">InterpreterError</a></td><td class="doc"><p>Interpreting the code
   failed. See <code><a href="Diagrams-Builder.html#v:ppInterpError">ppInterpError</a></code>.
</p></td></tr><tr><td class="src"><a name="v:Skipped" class="def">Skipped</a> <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a></td><td class="doc"><p>This diagram did not need to be
   regenerated; includes the hash.
</p></td></tr><tr><td class="src"><a name="v:OK" class="def">OK</a> <a href="Diagrams-Builder-Opts.html#t:Hash">Hash</a> (<a href="Diagrams-Core-Types.html#t:Result">Result</a> b v)</td><td class="doc"><p>A successful build, yielding the
   hash and a backend-specific result.
</p></td></tr></table></div></div><div class="top"><p class="src"><a name="v:ppInterpError" class="def">ppInterpError</a> :: <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hint-0.3.3.7/html/Language-Haskell-Interpreter.html#t:InterpreterError">InterpreterError</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a><a href="src/Diagrams-Builder.html#ppInterpError" class="link">Source</a></p><div class="doc"><p>Pretty-print an <code>InterpreterError</code>.
</p></div></div><h1 id="g:5">Interpreting diagrams
</h1><div class="doc"><p>These functions constitute the internals of diagrams-builder.  End
 users should not usually need to call them directly; use
 <code><a href="Diagrams-Builder.html#v:buildDiagram">buildDiagram</a></code> instead.
</p></div><div class="top"><p class="src"><a name="v:setDiagramImports" class="def">setDiagramImports</a><a href="src/Diagrams-Builder.html#setDiagramImports" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hint-0.3.3.7/html/Language-Haskell-Interpreter.html#t:MonadInterpreter">MonadInterpreter</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></td><td class="doc"><p>Filename of the module containing the diagrams
</p></td></tr><tr><td class="src">-&gt; [<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a>]</td><td class="doc"><p>Additional necessary imports. <code>Prelude</code>, <code>Diagrams.Prelude</code>,
   <code>Diagrams.Core.Types</code>, and <code>Data.Monoid</code> are included by
   default.
</p></td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Set up the module to be interpreted, in the context of the
   necessary imports.
</p></div></div><div class="top"><p class="src"><a name="v:interpretDiagram" class="def">interpretDiagram</a> :: <span class="keyword">forall</span> b v. (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> b, <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> v, <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/vector-space-0.8.6/html/Data-VectorSpace.html#t:InnerSpace">InnerSpace</a> v, <a href="Diagrams-Core-Envelope.html#t:OrderedField">OrderedField</a> (<a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/vector-space-0.8.6/html/Data-VectorSpace.html#t:Scalar">Scalar</a> v), <a href="Diagrams-Core-Types.html#t:Backend">Backend</a> b v) =&gt; <a href="Diagrams-Builder.html#t:BuildOpts">BuildOpts</a> b v -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Either.html#t:Either">Either</a> <a href="file:///home/brent/src/diagrams/haddocks-tmp/.hsenv_haddocks/cabal/share/doc/x86_64-linux-ghc-7.6.3/hint-0.3.3.7/html/Language-Haskell-Interpreter.html#t:InterpreterError">InterpreterError</a> (<a href="Diagrams-Core-Types.html#t:Result">Result</a> b v))<a href="src/Diagrams-Builder.html#interpretDiagram" class="link">Source</a></p><div class="doc"><p>Interpret a diagram expression based on the contents of a given
   source file, using some backend to produce a result.  The
   expression can be of type <code>Diagram b v</code> or <code>IO (Diagram b v)</code>.
</p></div></div><h1 id="g:6">Tools for creating standalone builder executables
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Build" class="def">Build</a>  <a href="src/Diagrams-Builder-CmdLine.html#Build" class="link">Source</a></p><div class="doc"><p>Record of command-line options.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Build" class="def">Build</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:width" class="def">width</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Prelude.html#t:Double">Double</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:height" class="def">height</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Prelude.html#t:Double">Double</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:srcFile" class="def">srcFile</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:expr" class="def">expr</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:outFile" class="def">outFile</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:dir" class="def">dir</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Build" class="caption collapser" onclick="toggleSection('i:Build')">Instances</p><div id="section.i:Build" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Data.html#t:Data">Data</a> <a href="Diagrams-Builder.html#t:Build">Build</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Diagrams-Builder.html#t:Build">Build</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:defaultBuildOpts" class="def">defaultBuildOpts</a> :: <a href="Diagrams-Builder.html#t:Build">Build</a><a href="src/Diagrams-Builder-CmdLine.html#defaultBuildOpts" class="link">Source</a></p><div class="doc"><p>Default command-line options record.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>